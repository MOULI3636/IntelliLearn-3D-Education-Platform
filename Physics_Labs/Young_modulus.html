<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Young's Modulus Virtual Lab</title>
    <style>
        :root {
            --primary-color: #27ae60;
            --secondary-color: #2c3e50;
            --accent-color: #e74c3c;
            --light-bg: #f8f9fa;
            --dark-bg: #343a40;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --glow-color: rgba(39, 174, 96, 0.4);
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            background-color: #ffffff;
            padding: 20px;
            gap: 20px;
            margin: 0;
            position: relative;
        }

        .header-buttons {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .header-btn {
            padding: 8px 15px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9em;
            box-shadow: 0 0 5px var(--glow-color);
        }

        .header-btn:hover {
            background-color: #219955;
            box-shadow: 0 0 8px var(--glow-color);
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            background: #ffffff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 0 15px var(--glow-color);
            max-width: 1200px;
            width: 100%;
            border: 2px solid var(--primary-color);
            margin-top: 60px;
        }

        .simulation-area {
            flex: 1;
            min-width: 400px;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 10px var(--glow-color);
            border: 1px solid var(--primary-color);
        }

        #simulation-canvas {
            border: 1px solid #ccc;
            background-color: #f9f9f9;
            border-radius: 8px;
            width: 100%;
            height: 500px;
        }

        .interface {
            flex: 1;
            min-width: 350px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .controls, .results, .graph-container {
            padding: 20px;
            background-color: #fafafa;
            border-radius: 8px;
            box-shadow: 0 0 8px var(--glow-color);
            border: 1px solid var(--primary-color);
            margin-top: 30px;
        }

        h1 {
            text-align: center;
            color: var(--secondary-color);
            margin-bottom: 30px;
            width: 100%;
        }

        h2 {
            margin-top: 0;
            color: var(--secondary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
        }
        
        .control-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        input[type="range"], select {
            width: 100%;
            cursor: pointer;
        }
        
        select {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        .value-display {
            font-weight: bold;
            color: var(--primary-color);
            display: inline-block;
            width: 80px;
            text-align: right;
        }

        .results p {
            font-size: 1.1em;
            background-color: #e9ecef;
            padding: 10px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .results span {
            font-family: 'Courier New', Courier, monospace;
            background-color: #fff;
            padding: 2px 6px;
            border-radius: 3px;
        }

        .graph-container {
            height: 300px;
        }

        #stress-strain-graph {
            width: calc(100% - 4px);  /* Reduced width to prevent overflow */
            height: calc(100% - 4px); /* Reduced height to prevent overflow */
            background-color: white;
            border-radius: 4px;
            margin: 2px; /* Added margin to center it */
        }

        .material-info {
            margin-top: 15px;
            padding: 10px;
            background-color: #e8f4fd;
            border-radius: 4px;
            border-left: 4px solid var(--primary-color);
        }

        .material-info p {
            margin: 5px 0;
            font-size: 0.9em;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .slider-container input {
            flex: 1;
        }

        .animation-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            margin-bottom: 30px;
        }

        button {
            padding: 8px 15px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
            box-shadow: 0 0 5px var(--glow-color);
        }

        button:hover {
            background-color: #219955;
            box-shadow: 0 0 8px var(--glow-color);
        }

        button:active {
            transform: translateY(1px);
        }

        .reset-btn {
            background-color: var(--accent-color);
        }

        .reset-btn:hover {
            background-color: #c0392b;
        }

        .theory-btn {
            margin-top: 10px;
            width: 100%;
        }

        .theory-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow-y: auto;
        }

        .theory-content {
            background-color: white;
            margin: 50px auto;
            padding: 30px;
            width: 80%;
            max-width: 800px;
            border-radius: 8px;
            box-shadow: 0 0 20px var(--glow-color);
            border: 2px solid var(--primary-color);
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: var(--secondary-color);
        }

        .theory-content h2 {
            color: var(--primary-color);
            margin-top: 0;
        }

        @media (max-width: 900px) {
            .container {
                flex-direction: column;
            }
            
            .simulation-area, .interface {
                width: 100%;
            }
        }
    </style>
</head>
<body>

<div class="header-buttons">
    <!-- <button class="header-btn" id="back-btn">Back Menu</button> -->
</div>

<div class="container">
    <h1>Young's Modulus Virtual Lab</h1>
    
    <div class="simulation-area">
        <h2>Simulation Setup</h2>
        <canvas id="simulation-canvas" width="400" height="500"></canvas>
        <div class="animation-controls">
            <button id="animate-btn">Animate Loading</button>
            <button id="reset-btn" class="reset-btn">Reset</button>
        </div>
        
        <div class="results">
            <h2>Results</h2>
            <p>Stress (σ): <span id="stress-result">0.00</span> MPa</p>
            <p>Strain (ε): <span id="strain-result">0.00</span></p>
            <p>Extension (ΔL): <span id="extension-result">0.00</span> mm</p>
            <p>Young's Modulus (Y): <span id="modulus-result">200.0</span> GPa</p>
        </div>
    </div>
    
    <div class="interface">
        <div class="controls">
            <h2>Controls</h2>
            <div class="control-group">
                <label for="material">Material: <span class="value-display" id="material-value">Steel</span></label>
                <select id="material">
                    <option value="steel" selected>Steel</option>
                    <option value="copper">Copper</option>
                    <option value="aluminum">Aluminum</option>
                    <option value="brass">Brass</option>
                </select>
                <div class="material-info" id="material-info">
                    <p><strong>Steel</strong> - High strength, commonly used in construction</p>
                    <p>Young's Modulus: 200 GPa</p>
                </div>
            </div>
            <div class="control-group">
                <label for="length">Wire Length (L): <span class="value-display" id="length-value">2.0</span> m</label>
                <div class="slider-container">
                    <input type="range" id="length" min="1" max="5" value="2" step="0.1">
                </div>
            </div>
            <div class="control-group">
                <label for="diameter">Wire Diameter (d): <span class="value-display" id="diameter-value">0.50</span> mm</label>
                <div class="slider-container">
                    <input type="range" id="diameter" min="0.2" max="1.0" value="0.5" step="0.01">
                </div>
            </div>
            <div class="control-group">
                <label for="mass">Added Mass (m): <span class="value-display" id="mass-value">0.0</span> kg</label>
                <div class="slider-container">
                    <input type="range" id="mass" min="0" max="10" value="0" step="0.5">
                </div>
            </div>
            <button class="theory-btn" id="theory-btn">Theory</button>
        </div>
        
        <div class="graph-container">
            <h2>Stress-Strain Relationship</h2>
            <canvas id="stress-strain-graph"></canvas>
        </div>
    </div>
</div>

<div class="theory-modal" id="theory-modal">
    <div class="theory-content">
        <span class="close-btn" id="close-theory">&times;</span>
        <h2>Theory of Young's Modulus</h2>
        
        <h3>Introduction</h3>
        <p>Young's modulus, also known as the elastic modulus, is a mechanical property that measures the stiffness of a solid material. It defines the relationship between stress (force per unit area) and strain (proportional deformation) in a material in the linear elasticity regime of a uniaxial deformation.</p>
        
        <h3>Definition</h3>
        <p>Young's modulus (E) is defined as the ratio of tensile stress (σ) to tensile strain (ε) in the elastic region of the stress-strain curve:</p>
        <p style="text-align: center; font-weight: bold;">E = σ / ε</p>
        
        <h3>Mathematical Formulation</h3>
        <p>Where:</p>
        <ul>
            <li>σ = F / A (Stress)</li>
            <li>ε = ΔL / L (Strain)</li>
            <li>F = Applied force</li>
            <li>A = Cross-sectional area</li>
            <li>ΔL = Change in length</li>
            <li>L = Original length</li>
        </ul>
        
        <p>Therefore, Young's modulus can be expressed as:</p>
        <p style="text-align: center; font-weight: bold;">E = (F × L) / (A × ΔL)</p>
        
        <h3>Units</h3>
        <p>Young's modulus is measured in pascals (Pa) or newtons per square meter (N/m²). For engineering materials, it's commonly expressed in gigapascals (GPa).</p>
        
        <h3>Elastic Behavior</h3>
        <p>Materials with a high Young's modulus are stiff and require large forces to produce small deformations. Materials with a low Young's modulus are more flexible and deform more easily under applied loads.</p>
        
        <h3>Hooke's Law</h3>
        <p>Young's modulus is essentially a measure of how much a material will deform under a given load, following Hooke's Law which states that the strain in a solid is proportional to the applied stress within the elastic limit of that solid.</p>
        
        <h3>Applications</h3>
        <p>Young's modulus is crucial in various engineering applications:</p>
        <ul>
            <li>Structural design and analysis</li>
            <li>Material selection for specific applications</li>
            <li>Predicting how materials will behave under load</li>
            <li>Quality control in manufacturing</li>
        </ul>
        
        <h3>Factors Affecting Young's Modulus</h3>
        <p>Several factors can influence the Young's modulus of a material:</p>
        <ul>
            <li>Material composition and microstructure</li>
            <li>Temperature (generally decreases with increasing temperature)</li>
            <li>Impurities and defects</li>
            <li>Processing history</li>
        </ul>
        
        <h3>Typical Values</h3>
        <p>Different materials have different Young's modulus values:</p>
        <ul>
            <li>Steel: 200 GPa</li>
            <li>Copper: 110 GPa</li>
            <li>Aluminum: 70 GPa</li>
            <li>Brass: 100 GPa</li>
            <li>Rubber: 0.01-0.1 GPa</li>
        </ul>
    </div>
</div>

<script>
    // --- SETUP & VARIABLES ---
    const canvas = document.getElementById('simulation-canvas');
    const ctx = canvas.getContext('2d');
    const graphCanvas = document.getElementById('stress-strain-graph');
    const graphCtx = graphCanvas.getContext('2d');

    // DOM Elements for controls and results
    const materialSelect = document.getElementById('material');
    const lengthSlider = document.getElementById('length');
    const diameterSlider = document.getElementById('diameter');
    const massSlider = document.getElementById('mass');
    const animateBtn = document.getElementById('animate-btn');
    const resetBtn = document.getElementById('reset-btn');
    const backBtn = document.getElementById('back-btn');
    const theoryBtn = document.getElementById('theory-btn');
    const theoryModal = document.getElementById('theory-modal');
    const closeTheory = document.getElementById('close-theory');

    const materialValue = document.getElementById('material-value');
    const lengthValue = document.getElementById('length-value');
    const diameterValue = document.getElementById('diameter-value');
    const massValue = document.getElementById('mass-value');
    const materialInfo = document.getElementById('material-info');

    const stressResult = document.getElementById('stress-result');
    const strainResult = document.getElementById('strain-result');
    const extensionResult = document.getElementById('extension-result');
    const modulusResult = document.getElementById('modulus-result');

    // Physical Constants and Properties
    const g = 9.81; // m/s^2
    const youngsModulusData = {
        steel: { value: 200e9, description: "High strength, commonly used in construction" },
        copper: { value: 110e9, description: "Good conductor, used in electrical wiring" },
        aluminum: { value: 70e9, description: "Lightweight, used in aerospace applications" },
        brass: { value: 100e9, description: "Corrosion resistant, used in musical instruments" }
    };

    let simParams = {
        material: 'steel',
        length: 2.0,       // meters
        diameter: 0.5,     // mm
        mass: 0.0          // kg
    };

    let animationId = null;
    let isAnimating = false;
    let animationMass = 0;

    // --- EVENT LISTENERS ---
    materialSelect.addEventListener('input', (e) => {
        simParams.material = e.target.value;
        materialValue.textContent = e.target.options[e.target.selectedIndex].text;
        updateMaterialInfo();
        updateSimulation();
    });

    lengthSlider.addEventListener('input', (e) => {
        simParams.length = parseFloat(e.target.value);
        lengthValue.textContent = simParams.length.toFixed(1);
        updateSimulation();
    });

    diameterSlider.addEventListener('input', (e) => {
        simParams.diameter = parseFloat(e.target.value);
        diameterValue.textContent = simParams.diameter.toFixed(2);
        updateSimulation();
    });

    massSlider.addEventListener('input', (e) => {
        simParams.mass = parseFloat(e.target.value);
        massValue.textContent = simParams.mass.toFixed(1);
        updateSimulation();
    });

    animateBtn.addEventListener('click', () => {
        if (isAnimating) {
            stopAnimation();
        } else {
            startAnimation();
        }
    });

    resetBtn.addEventListener('click', () => {
        stopAnimation();
        simParams.mass = 0;
        massSlider.value = 0;
        massValue.textContent = '0.0';
        updateSimulation();
    });

    backBtn.addEventListener('click', () => {
        alert('Back to main menu functionality would be implemented here.');
    });

    theoryBtn.addEventListener('click', () => {
        theoryModal.style.display = 'block';
    });

    closeTheory.addEventListener('click', () => {
        theoryModal.style.display = 'none';
    });

    window.addEventListener('click', (e) => {
        if (e.target === theoryModal) {
            theoryModal.style.display = 'none';
        }
    });

    // --- ANIMATION FUNCTIONS ---
    function startAnimation() {
        if (isAnimating) return;
        
        isAnimating = true;
        animateBtn.textContent = 'Stop Animation';
        animationMass = 0;
        
        function animate() {
            if (!isAnimating) return;
            
            animationMass += 0.05;
            if (animationMass > simParams.mass) {
                animationMass = simParams.mass;
                stopAnimation();
            }
            
            // Temporarily set mass for animation
            const tempMass = simParams.mass;
            simParams.mass = animationMass;
            updateSimulation();
            simParams.mass = tempMass;
            
            animationId = requestAnimationFrame(animate);
        }
        
        animate();
    }

    function stopAnimation() {
        isAnimating = false;
        animateBtn.textContent = 'Animate Loading';
        if (animationId) {
            cancelAnimationFrame(animationId);
            animationId = null;
        }
        // Ensure we show the actual mass value
        updateSimulation();
    }

    // --- UPDATE FUNCTIONS ---
    function updateMaterialInfo() {
        const material = youngsModulusData[simParams.material];
        materialInfo.innerHTML = `
            <p><strong>${materialSelect.options[materialSelect.selectedIndex].text}</strong> - ${material.description}</p>
            <p>Young's Modulus: ${(material.value / 1e9).toFixed(0)} GPa</p>
        `;
    }

    function updateSimulation() {
        // Get current values
        const Y = youngsModulusData[simParams.material].value;
        const L = simParams.length;
        const d_m = simParams.diameter / 1000; // diameter in meters
        const r_m = d_m / 2;
        const m = isAnimating ? animationMass : simParams.mass;

        // Calculate physical quantities
        const Area = Math.PI * Math.pow(r_m, 2);
        const Force = m * g;
        const Stress = Force / Area;
        const Strain = (Y > 0) ? Stress / Y : 0;
        const extension_m = Strain * L; // extension in meters

        // Convert for display
        const stress_MPa = Stress / 1e6;
        const extension_mm = extension_m * 1000;
        const Y_GPa = Y / 1e9;

        // Update results display
        stressResult.textContent = stress_MPa.toFixed(2);
        strainResult.textContent = Strain.toFixed(6);
        extensionResult.textContent = extension_mm.toFixed(3);
        modulusResult.textContent = Y_GPa.toFixed(1);
        
        // Redraw the canvas and graph
        draw(extension_mm);
        drawStressStrainGraph(Stress, Strain, Y);
    }

    // --- DRAWING FUNCTIONS ---
    function draw(extension) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Exaggerate extension for visibility (e.g., 20 pixels per mm)
        const visualExtension = extension * 20;

        // 1. Draw Rigid Support
        ctx.fillStyle = '#6c757d';
        ctx.fillRect(0, 0, canvas.width, 40);
        ctx.strokeStyle = '#343a40';
        ctx.lineWidth = 2;
        ctx.strokeRect(0, 0, canvas.width, 40);
        
        // Draw diagonal lines for support texture
        ctx.beginPath();
        for(let i = 0; i < canvas.width; i += 10) {
            ctx.moveTo(i, 0);
            ctx.lineTo(i - 10, 40);
        }
        ctx.stroke();

        // 2. Draw Wire
        const wireStartX = canvas.width / 2;
        const wireStartY = 40;
        const wireBaseLength = 350; // Increased base length for longer scale
        const wireCurrentLength = wireBaseLength + visualExtension;
        
        ctx.beginPath();
        ctx.moveTo(wireStartX, wireStartY);
        ctx.lineTo(wireStartX, wireStartY + wireCurrentLength);
        ctx.strokeStyle = '#212529';
        ctx.lineWidth = Math.max(1, simParams.diameter * 2); // Visual thickness
        ctx.stroke();
        
        // 3. Draw Mass Hanger
        const hangerY = wireStartY + wireCurrentLength;
        ctx.fillStyle = '#495057';
        ctx.fillRect(wireStartX - 30, hangerY, 60, 10); // Hanger bar
        ctx.fillRect(wireStartX - 5, hangerY + 10, 10, 15); // Hanger hook

        // 4. Draw Mass
        if (simParams.mass > 0) {
            const massHeight = Math.max(20, simParams.mass * 5); // Visual height for mass
            ctx.fillStyle = '#ffc107';
            ctx.fillRect(wireStartX - 40, hangerY + 25, 80, massHeight);
            ctx.strokeStyle = '#e9a200';
            ctx.strokeRect(wireStartX - 40, hangerY + 25, 80, massHeight);
            ctx.fillStyle = '#000';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`${(isAnimating ? animationMass : simParams.mass).toFixed(1)} kg`, wireStartX, hangerY + 45 + massHeight/2 - 10);
        }

        // 5. Draw Scale with millimeter markings - Increased length
        const scaleX = wireStartX + 80;
        const scaleY = 40;
        const scaleHeight = 400; // Increased scale height
        
        // Draw scale background
        ctx.fillStyle = '#f8f9fa';
        ctx.fillRect(scaleX, scaleY, 40, scaleHeight);
        ctx.strokeStyle = '#495057';
        ctx.lineWidth = 2;
        ctx.strokeRect(scaleX, scaleY, 40, scaleHeight);
        
        // Draw scale markings and numbers
        ctx.strokeStyle = '#495057';
        ctx.lineWidth = 1;
        ctx.font = 'bold 12px Arial';
        ctx.fillStyle = '#2c3e50';
        ctx.textAlign = 'left';
        
        // Draw millimeter markings (every 10mm)
        for (let i = 0; i <= scaleHeight; i += 10) {
            const markY = scaleY + i;
            const isMajorMark = i % 50 === 0; // Major marks every 50mm
            
            // Draw the mark
            ctx.beginPath();
            ctx.moveTo(scaleX, markY);
            ctx.lineTo(scaleX + (isMajorMark ? 25 : 15), markY);
            ctx.stroke();
            
            // Add numbers for major marks
            if (isMajorMark) {
                const mmValue = scaleHeight - i; // Start from scaleHeight at the top
                ctx.fillText(mmValue + ' mm', scaleX + 28, markY + 4);
            }
        }
        
        // Draw pointer
        ctx.beginPath();
        ctx.fillStyle = 'red';
        ctx.moveTo(scaleX, hangerY);
        ctx.lineTo(scaleX - 10, hangerY - 5);
        ctx.lineTo(scaleX - 10, hangerY + 5);
        ctx.closePath();
        ctx.fill();
        
        // Draw extension indicator
        if (extension > 0) {
            ctx.beginPath();
            ctx.strokeStyle = 'red';
            ctx.setLineDash([5, 3]);
            ctx.moveTo(wireStartX, wireStartY + wireBaseLength);
            ctx.lineTo(wireStartX, hangerY);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Extension value
            ctx.fillStyle = 'red';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`ΔL = ${extension.toFixed(2)} mm`, wireStartX, hangerY + 25);
        }
    }

    function drawStressStrainGraph(stress, strain, youngsModulus) {
        const width = graphCanvas.width;
        const height = graphCanvas.height;
        const padding = 40;
        
        graphCtx.clearRect(0, 0, width, height);
        
        // Draw axes
        graphCtx.strokeStyle = '#495057';
        graphCtx.lineWidth = 1;
        graphCtx.beginPath();
        graphCtx.moveTo(padding, padding);
        graphCtx.lineTo(padding, height - padding);
        graphCtx.lineTo(width - padding, height - padding);
        graphCtx.stroke();
        
        // Draw axis labels
        graphCtx.fillStyle = '#495057';
        graphCtx.font = 'bold 12px Arial';
        graphCtx.textAlign = 'center';
        graphCtx.fillText('Strain (ε)', width / 2, height - 10);
        graphCtx.save();
        graphCtx.translate(15, height / 2);
        graphCtx.rotate(-Math.PI / 2);
        graphCtx.fillText('Stress (σ) MPa', 0, 0);
        graphCtx.restore();
        
        // Calculate max values for scaling
        const maxStrain = 0.01; // 1% strain
        const maxStress = youngsModulus * maxStrain / 1e6; // Convert to MPa
        
        // Draw grid lines
        graphCtx.strokeStyle = '#e9ecef';
        graphCtx.lineWidth = 0.5;
        graphCtx.beginPath();
        
        // Vertical grid lines (strain)
        for (let i = 1; i < 5; i++) {
            const x = padding + (i * (width - 2 * padding) / 5);
            graphCtx.moveTo(x, padding);
            graphCtx.lineTo(x, height - padding);
        }
        
        // Horizontal grid lines (stress)
        for (let i = 1; i < 5; i++) {
            const y = height - padding - (i * (height - 2 * padding) / 5);
            graphCtx.moveTo(padding, y);
            graphCtx.lineTo(width - padding, y);
        }
        graphCtx.stroke();
        
        // Draw theoretical line (Hooke's Law)
        graphCtx.strokeStyle = '#3498db';
        graphCtx.lineWidth = 2;
        graphCtx.beginPath();
        graphCtx.moveTo(padding, height - padding);
        
        const xEnd = padding + (maxStrain * (width - 2 * padding) / maxStrain);
        const yEnd = height - padding - (maxStress * (height - 2 * padding) / maxStress);
        graphCtx.lineTo(xEnd, yEnd);
        graphCtx.stroke();
        
        // Draw current point if there's strain
        if (strain > 0) {
            const pointX = padding + (strain * (width - 2 * padding) / maxStrain);
            const pointY = height - padding - (stress / 1e6 * (height - 2 * padding) / maxStress);
            
            graphCtx.fillStyle = '#e74c3c';
            graphCtx.beginPath();
            graphCtx.arc(pointX, pointY, 5, 0, Math.PI * 2);
            graphCtx.fill();
            
            // Draw connecting line to axes
            graphCtx.strokeStyle = '#e74c3c';
            graphCtx.setLineDash([5, 3]);
            graphCtx.beginPath();
            graphCtx.moveTo(pointX, pointY);
            graphCtx.lineTo(pointX, height - padding);
            graphCtx.moveTo(pointX, pointY);
            graphCtx.lineTo(padding, pointY);
            graphCtx.stroke();
            graphCtx.setLineDash([]);
            
            // Add labels for current point
            graphCtx.fillStyle = '#e74c3c';
            graphCtx.font = 'bold 12px Arial';
            graphCtx.textAlign = 'center';
            graphCtx.fillText(`(${strain.toFixed(4)}, ${(stress/1e6).toFixed(2)} MPa)`, pointX, pointY - 10);
        }
        
        // Add scale values
        graphCtx.fillStyle = '#6c757d';
        graphCtx.font = 'bold 10px Arial';
        graphCtx.textAlign = 'center';
        
        // Strain values
        for (let i = 0; i <= 5; i++) {
            const x = padding + (i * (width - 2 * padding) / 5);
            const strainValue = (i * maxStrain / 5).toFixed(3);
            graphCtx.fillText(strainValue, x, height - padding + 15);
        }
        
        // Stress values
        graphCtx.textAlign = 'right';
        for (let i = 0; i <= 5; i++) {
            const y = height - padding - (i * (height - 2 * padding) / 5);
            const stressValue = (i * maxStress / 5).toFixed(0);
            graphCtx.fillText(stressValue, padding - 5, y + 3);
        }
    }

    // --- INITIALIZE ---
    window.onload = () => {
        // Set canvas dimensions
        graphCanvas.width = graphCanvas.offsetWidth;
        graphCanvas.height = graphCanvas.offsetHeight;
        
        updateMaterialInfo();
        updateSimulation();
    };

    // Handle window resize
    window.addEventListener('resize', () => {
        graphCanvas.width = graphCanvas.offsetWidth;
        graphCanvas.height = graphCanvas.offsetHeight;
        updateSimulation();
    });
</script>

</body>
</html>